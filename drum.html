		<span id="drum_body"></span>

<script>
let drum_body_text = '';
for(let i=0;i<20;i++)
{
	drum_body_text += '<label class="pianoroll-box indicator-box"><input type="checkbox" id="rowDrum'+i+'-current" disabled><span class="pianoroll-box-check indicator"></span></label>';
}
drum_body_text += '<br>';

//pianoroll
let drum_name = ["doble","hi1","hi2","hi3","lo1","lo2","lo3","loking","mid1","mid2","mid3","mid4","tick"];
let drum_pointer=0;
//65='A'
for(let j=65;j<78;j++)
{
	for(let i=0;i<20;i++)
	{
		if(i<10)
		{
			if(i==0)
			{
				drum_body_text += '<label class="pianoroll-box"><input type="checkbox" id="rowDrum'+i+String.fromCharCode(j)+'" name="rowDrum'+i+String.fromCharCode(j)+'"><span class="pianoroll-box-check" style="font-size: 15px;">'+drum_name[drum_pointer]+'</span></label>';
				drum_pointer++;
			}
			else
			{
				drum_body_text += '<label class="pianoroll-box"><input type="checkbox" id="rowDrum'+i+String.fromCharCode(j)+'" name="rowDrum'+i+String.fromCharCode(j)+'"><span class="pianoroll-box-check"></span></label>';
			}
		}
		else
		{
			drum_body_text += '<label class="pianoroll-box"><input type="checkbox" id="rowDrum'+i+String.fromCharCode(j)+'" name="rowDrum'+(i-10)+'A"><span class="pianoroll-box-check"></span></label>';
		}
	}
	drum_body_text += '<br>';
}

document.getElementById("drum_body").insertAdjacentHTML("afterbegin", drum_body_text);

</script>

		<br>
		<span class="play_settings">
		<button class="playback_button" onclick="playFromArray()">Play</button>
		<button class="playback_button" onclick="stop()">Stop</button>
		<input type="checkbox" id="loopEnabled"><label> Loop</label></input>
		</span>
		
		<span class="speed_settings">Speed:  
		<input type="number" id="time" value="500"></input>
		<button class="playback_button" onclick="changeTime()">Set</button>
		</span>
		
		
		
				<div style="display:none;">	
	<audio controls id="doble" src="pianoroll/sample/Drum/doble.mp3"></audio>
	<audio controls id="hi1" src="pianoroll/sample/Drum/hi-1.mp3"></audio>
	<audio controls id="hi2" src="pianoroll/sample/Drum/hi-2.mp3"></audio>
	<audio controls id="hi3" src="pianoroll/sample/Drum/hi-3.mp3"></audio>
	<audio controls id="lo1" src="pianoroll/sample/Drum/lo-1.mp3"></audio>
	<audio controls id="lo2" src="pianoroll/sample/Drum/lo-2.mp3"></audio>
	<audio controls id="lo3" src="pianoroll/sample/Drum/lo-3.mp3"></audio>
	<audio controls id="loking" src="pianoroll/sample/Drum/lo-king.mp3"></audio>
	<audio controls id="mid1" src="pianoroll/sample/Drum/mid-1.mp3"></audio>
	<audio controls id="mid2" src="pianoroll/sample/Drum/mid-2.mp3"></audio>
	<audio controls id="mid3" src="pianoroll/sample/Drum/mid-3.mp3"></audio>
	<audio controls id="mid4" src="pianoroll/sample/Drum/mid-4.mp3"></audio>
	<audio controls id="tick" src="pianoroll/sample/Drum/tick.mp3"></audio>
	</div>
		
	<script>
		function sample_playDrum(sample,timeout) {
	var audio = new Audio();
	audio.src = sample.src;
	setTimeout(function() {
		audio.play();
		setTimeout(function (){sample.currentTime=0;},timeout);
		console.log(dupaDrum[i]);
	},i*timeout);
}

var dupaDrum = '';

function onButtonClickDrum(character) {
	dupaDrum = dupaDrum + character;
	updateDisplayElementDrum();
}

function removeByIndexDrum(index) {
	var array = dupaDrum.split('');
	array.splice(index, 1);
	dupaDrum = array.join('');
}

function onRemoveButtonClickDrum(index) {
	var index = document.getElementById("user-input").value;
	removeByIndexDrum(index);
	updateDisplayElementDrum();
}

function onRemoveLastButtonClickDrum() {
	removeByIndexDrum(dupaDrum.length - 1);
	updateDisplayElementDrum();
}

function updateDisplayElementDrum() {
	document.getElementById("display-object-id").innerHTML = dupaDrum;
}

function onDisplayButtonClickDrum() {
	let sample = document.getElementById("doble");
	let sample1 = document.getElementById("hi1");
	let sample2 = document.getElementById("hi2");
	let sample3 = document.getElementById("hi3");
	let sample4 = document.getElementById("lo1");
	let sample5 = document.getElementById("lo2");
	let sample6 = document.getElementById("lo3");
	let sample7 = document.getElementById("loking");
	let sample8 = document.getElementById("mid1");
	let sample9 = document.getElementById("mid2");
	let sample10 = document.getElementById("mid3");
	let sample11 = document.getElementById("mid4");
	let sample12 = document.getElementById("tick");
	let timeout = 500;

	for (i = 0; i < dupaDrum.length; ++i) {
		switch (dupaDrum[i]) {
			case 'A':
				sample_play(sample,timeout);
				break;
			case 'B':
				sample_play(sample1,timeout);
				break;
			case 'C':
				sample_play(sample2,timeout);
				break;			
			case 'D':
				sample_play(sample3,timeout);
				break;			
			case 'E':
				sample_play(sample4,timeout);
				break;			
			case 'F':
				sample_play(sample5,timeout);
				break;		
			case 'G':
				sample_play(sample6,timeout);
				break;	
			case 'H':
				sample_play(sample7,timeout);
				break;		
			case 'I':
				sample_play(sample8,timeout);
				break;		
			case 'J':
				sample_play(sample9,timeout);
				break;		
			case 'K':
				sample_play(sample10,timeout);
				break;	
			case 'L':
				sample_play(sample11,timeout);
				break;	
			case 'M':
				sample_play(sample12,timeout);
				break;
			default:
				sample_play
		}
	}
}






frameTimeoutDrum = 500;

stoppedDrum = false;
rowsCountDrum = 20;
instrumentsDrum = 'ABCDEFGHIJKLM';
ADrum = document.getElementById("doble");
BDrum = document.getElementById("hi1");
CDrum = document.getElementById("hi2");
DDrum = document.getElementById("hi3");
EDrum = document.getElementById("lo1");
FDrum = document.getElementById("lo2");
GDrum = document.getElementById("lo3");
HDrum = document.getElementById("loking");
IDrum = document.getElementById("mid1");
JDrum = document.getElementById("mid2");
KDrum = document.getElementById("mid3");
LDrum = document.getElementById("mid4");
MDrum = document.getElementById("tick");

function changeTimeDrum() {
	let value = document.getElementById("time").value;
	if (value <= 10) {
		alert('Value too low');
	} else {
		frameTimeoutDrum = value;
	}
}

function playSampleInstantDrum(sample) {
	var audio = new Audio();
	audio.src = sample.src;
	audio.play();
}

function playInstrumentDrum(instrument) {
	switch (instrument) {
		case 'A':
			playSampleInstantDrum(ADrum);
			break;
		case 'B':
			playSampleInstantDrum(BDrum);
			break;
		case 'C':
			playSampleInstantDrum(CDrum);
			break;
		case 'D':
			playSampleInstantDrum(DDrum);
			break;
		case 'E':
			playSampleInstantDrum(EDrum);
			break;
		case 'F':
			playSampleInstantDrum(FDrum);
			break;
		case 'G':
			playSampleInstantDrum(GDrum);
			break;
		case 'H':
			playSampleInstantDrum(HDrum);
			break;
		case 'I':
			playSampleInstantDrum(IDrum);
			break;
		case 'J':
			playSampleInstantDrum(JDrum);
			break;
		case 'K':
			playSampleInstantDrum(KDrum);
			break;
		case 'L':
			playSampleInstantDrum(LDrum);
			break;
		case 'M':
			playSampleInstantDrum(MDrum);
			break;
		default:
			console.log('instrument ' + instrument + ' not supported'); 
	}
}

function playFromArrayDrum() {
	stoppedDrum = false;
	playRowRecursiveDrum(0, true);
}

function stopDrum() {
	stoppedDrum = true;
}

function clearIndicatorDrum () {
	for(let i = 0; i < rowsCountDrum; i++) {
		document.getElementById("rowDrum" + i + "-current").checked = false;
	}
}

function moveIndicatorDrum(index) {
	clearIndicatorDrum();
	document.getElementById("rowDrum" + index + "-current").checked = true;
}

function playRowRecursiveDrum(whichRow) {
	if (whichRow >= rowsCountDrum) {
		if(document.getElementById("loopEnabled").checked) {
			setTimeout(playRowRecursiveDrum, frameTimeoutDrum, 0);
		} else {
			clearIndicatorDrum();
			return true;
		}
	}
	
	moveIndicatorDrum(whichRow);
	
	let rowValues = getRowValuesDrum(whichRow, false);
	for(let i = 0; i < rowValues.length; i++) {
		playInstrumentDrum(rowValues[i]);
	}
	if (!stoppedDrum) {
		setTimeout(playRowRecursiveDrum, frameTimeoutDrum, whichRow + 1);
	} else {
		clearIndicatorDrum();
		stoppedDrum = false;
	}
}

function getRowValuesDrum(row, clearAfterPlay) { // row = ktora kolumna, np. 1, 4..., zwraca co tam jest zaznaczone w postaci np. 'AB', 'C', ''
	let values = '';

	for(let i = 0; i < instrumentsDrum.length; i++) {
		let selected = document.getElementById("rowDrum" + row + instrumentsDrum[i]);
		if (selected.checked) {
			values = values + instrumentsDrum[i];
		}
		if (clearAfterPlay) {
			selected.checked = false;
		}
	}
	return values;
}

		</script>